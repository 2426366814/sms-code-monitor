## 多用户接码系统修复计划

### 问题分析
1. **API密钥生成错误**："specified key was too long" - 由于 MySQL 5.7 索引长度限制，utf8mb4 字符集下 VARCHAR(255) 的唯一索引超过了 767 字节限制
2. **管理员后台退出功能**：用户反映仍然没有退出按钮，需要检查HTML结构
3. **添加用户功能**：确认之前的权限修复是否完全解决问题
4. **数据库结构问题**：确保所有表能正确创建

### 修复步骤

#### 1. 修复API密钥生成错误
- 修改 `ApiKeyModel.php` 中的表创建语句，将 `api_key` 字段的唯一索引改为前缀索引
- 修改 `database.sql` 中的对应表结构
- 确保 API 密钥生成逻辑正常工作

#### 2. 检查并修复管理员后台退出功能
- 检查所有管理员页面（dashboard.html, users.html, monitors.html, codes.html, system.html）的HTML结构
- 确保退出按钮在侧边栏和顶部导航中正确显示
- 验证退出功能的JavaScript逻辑

#### 3. 确认添加用户功能修复
- 检查 `backend/api/admin/index.php` 中的权限检查逻辑
- 验证 `UserService.php` 中的 `checkPermission` 方法
- 测试添加用户的完整流程

#### 4. 优化数据库结构
- 检查并修复所有表的索引长度限制
- 确保外键约束正确设置
- 验证数据库初始化脚本

### 测试步骤
1. 测试API密钥生成功能
2. 测试管理员后台退出功能
3. 测试添加用户功能
4. 测试其他管理员功能
5. 验证数据库表结构

### 打包步骤
- 使用PowerShell脚本自动打包项目
- 确保所有必要文件都包含在包中
- 生成版本号标识